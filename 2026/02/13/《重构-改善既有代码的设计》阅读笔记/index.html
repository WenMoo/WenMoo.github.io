<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Wen Mo">





<title>《重构.改善既有代码的设计》阅读笔记 | Hexo</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 8.1.1"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const pagebody = document.getElementsByTagName('body')[0]

            function setTheme(status) {

                if (status === 'dark') {
                    window.sessionStorage.theme = 'dark'
                    pagebody.classList.add('dark-theme');

                } else if (status === 'light') {
                    window.sessionStorage.theme = 'light'
                    pagebody.classList.remove('dark-theme');
                }
            };

            setTheme(window.sessionStorage.theme)
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">不喜的代码乐园</a></div>
            <div class="menu navbar-right">
                
                <a class="menu-item" href="/archives">文章</a>
                
                <a class="menu-item" href="/category">类别</a>
                
                <a class="menu-item" href="/tag">标签</a>
                
                <a class="menu-item" href="/about">关于</a>
                
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">不喜的代码乐园</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">
                    <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M4.5 17.27q-.213 0-.356-.145T4 16.768t.144-.356t.356-.143h15q.213 0 .356.144q.144.144.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.144T4 11.999t.144-.356t.356-.143h15q.213 0 .356.144t.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.143Q4 7.443 4 7.23t.144-.356t.356-.143h15q.213 0 .356.144T20 7.23t-.144.356t-.356.144z"/></svg>
                    <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Material Symbols Light by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"/></svg>
                </div>
            </div>
            <div class="menu" id="mobile-menu">
                
                <a class="menu-item" href="/archives">文章</a>
                
                <a class="menu-item" href="/category">类别</a>
                
                <a class="menu-item" href="/tag">标签</a>
                
                <a class="menu-item" href="/about">关于</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.classList.contains("active")) {
            toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        } else {
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">《重构.改善既有代码的设计》阅读笔记</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Wen Mo</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">February 13, 2026&nbsp;&nbsp;16:36:44</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <p><strong><font style="color:#DF2A3F;">关于重构，最关键是使得代码 “</font><strong><strong><font style="color:#DF2A3F;">更容易理解，更易于修改</font></strong></strong><font style="color:#DF2A3F;">”，而重构的工作就是围绕这两点执行！</font></strong></p>
<h4 id="一、开始"><a href="#一、开始" class="headerlink" title="一、开始"></a>一、开始</h4><blockquote>
<p><font style="color:rgb(133, 133, 133);">Tip：如果你要给程序添加一个特性，但发现代码因缺乏良好的结构而不易于进行更改，那就先重构那个程序，使其比较容易添加该特性，然后再添加该特性。</font></p>
</blockquote>
<h6 id="1、测试集"><a href="#1、测试集" class="headerlink" title="1、测试集"></a>1、测试集</h6><p>作为重构，最重要的是确保修改后的代码执行和之前一致。那么最理想的是对即将修改的代码有一组可靠的测试，那么就能很方便的测试我们的修改没有被破坏。</p>
<blockquote>
<p>吐槽：大多数我们应该都没有测试集能去跑吧~还是建议如下方的小步修改，测试，提交！</p>
</blockquote>
<h6 id="2、小步修改"><a href="#2、小步修改" class="headerlink" title="2、小步修改"></a>2、小步修改</h6><p>尽可能的修改重构后，马上测试，这样即使犯错了，也能快速的确定很小的一个改动范围。其实不只是重构中，我们开发功能同样的，提倡少量多次的提交，这样我们能清晰每一个实现和改动的地方，避免了混乱。<font style="background-color:#FBDE28;">以微小的步伐修改程序，如果犯下错误，也能很容易便可发现它。</font></p>
<h6 id="3、临时变量"><a href="#3、临时变量" class="headerlink" title="3、临时变量"></a>3、临时变量</h6><h6 id="4、营地法则"><a href="#4、营地法则" class="headerlink" title="4、营地法则"></a>4、营地法则</h6><p>保证你离开时的代码库一定比来时更健康。</p>
<blockquote>
<p>好代码的检验标准就是人们是否能轻而易举地修改它。好代码应该直截了当：有人需要修改代码时，他们应能轻易找到修改点，应该能快速做出更改，而不易引入其他错误。</font></p>
</blockquote>
</font>

<h6 id="5、随时重构"><a href="#5、随时重构" class="headerlink" title="5、随时重构"></a>5、随时重构</h6><p>重构一定是轻量的，可以是看到顺手而为的，不是什么高大尚，也许是改个属性名，调整个位置。最终极的目的是，让我们更好的理解！</p>
<h4 id="二、坏味道的代码"><a href="#二、坏味道的代码" class="headerlink" title="二、坏味道的代码"></a>二、坏味道的代码</h4><ul>
<li><strong>神秘的命名</strong>🌟🌟🌟🌟🌟<ul>
<li>命名含义不明，含义不对应，不能清晰的表明自己的功能和用法</li>
</ul>
</li>
<li><strong>重复代码</strong>🌟🌟🌟🌟🌟<ul>
<li>相同的代码结构，尽量抽取相同逻辑，合二为一</li>
</ul>
</li>
<li><strong>过长函数</strong>🌟🌟🌟🌟🌟<ul>
<li>长函数是贼值的吐槽的，单个函数超过100行就很不应该！</li>
<li>我们应该遵循这样一条原则：<font style="color:rgb(51, 51, 51);background-color:#FBDE28;">每当感觉需要以注释来说明点什么的时候，我们就把需要说明的东西写进一个独立函数中，并以其用途（而非实现手法）命名。</font></li>
<li>可能会觉得拆分为小函数，会让阅读负担，总是需要切换上下文来看这个函数是做什么，但是其实现代的开发环境让你可以在函数的调用处与声明处之间快速跳转，或是同时看到这两处，让你根本不用来回跳转。不过说到底，让小函数易于理解的关键还是在于良好的命名。如果你能给函数起个好名字，阅读代码的人就可以通过名字了解函数的作用，根本不必去看其中写了些什么。</font></li>
</ul>
</li>
<li><strong>过长的参数列表</strong>🌟🌟🌟<ul>
<li>过长参数也很难受呀，冗长切混乱，意图逻辑不清晰了，修改容易出问题</font></li>
</ul>
</li>
<li><strong>全局数据</strong>🌟🌟🌟🌟🌟<ul>
<li>无需多言，哪里瞎改了也不知道~建议只读</font></li>
</ul>
</li>
<li><strong>可变数据</strong>🌟🌟🌟🌟🌟<ul>
<li>这点也是，我们数据应该容易管理，读取&#x2F;修改，一定要避免在意料之外的地方操作了数据。这会使得出问题的时候非常难排查。尤其是引用类型！！！</font></li>
<li>最简单的方式：</font><font style="color:rgb(51, 51, 51);background-color:#FBDE28;">控制作用域范围</font></li>
</ul>
</li>
<li><strong>发散式变化</strong>🌟</li>
<li><strong>霰弹式修改</strong>🌟<ul>
<li>每遇到某种变化，你都必须在许多不同的类内做出许多小修改，那么也是该警惕的，因为很容易忽漏某个修改！</font></li>
</ul>
</li>
<li><strong>依恋情结</strong></li>
<li><strong>数据泥团</strong>🌟🌟🌟<ul>
<li>如果你常看到好几项数据经常结伴同行，那么其实你就很因该将他们合并为一个对象。为什么呢？他们结伴出现，那么意味着这是一类的东西，那么合并是自然而然的，再往下合并处理之后后如果添加扩展也条理了。</font></li>
<li><font style="color:rgb(51, 51, 51);background-color:#FBDE28;">其实更关键的是，合并或者新建一个类来处理之后，能揭示代码规则，显得逻辑更清晰。</font></li>
</ul>
</li>
<li><strong>重复的 switch</strong>🌟🌟🌟<ul>
<li>这类也是要避免疏漏的情况，比如在A的 switch 中添加了一个分支，那么你必须找到所有的 B，C，D…..(switch) ，并且逐一更新。</font></li>
<li>使用多态往往是处理的好方式！</font></li>
</ul>
</li>
<li><strong>循环语句</strong>🌟🌟🌟🌟🌟<ul>
<li>循环在我们日常开发很常见了，但放到现在是不是有点过时了？</font></li>
<li>使用管道操作循环吧！如 filter 和 map 可以帮助我们更快地看清被处理的元素以及处理它们的动作。减少嵌套！更加易读！</font></li>
<li><font style="color:rgb(51, 51, 51);background-color:#FBDE28;">但注意滥用，管道的核心原则是只负责转换，筛选，不负责执行副作用，适合最终目的返回一个新值的！</font></li>
</ul>
</li>
<li><strong>冗赘的元素</strong><ul>
<li>往往开发中随着不断地迭代，我们会开到很多之前的东西，往往上一次因为不确定是否后续还需要而被保留下来</font></li>
</ul>
</li>
<li><strong>夸夸其谈通用性</strong></li>
<li><strong>临时字段</strong></li>
<li><strong>过长的消息链</strong></li>
<li><strong>中间人</strong></li>
<li><strong>内幕交易</strong></li>
<li><strong>过大的类</strong></li>
<li><strong>异曲同工的类</strong></li>
<li><strong>纯数据类</strong></li>
<li><strong>被拒绝的遗赠</strong></li>
<li><strong>注释</strong><ul>
<li>这点我也认同，一般来说 函数即注释，函数单一职责，不做过多的事情，让人一眼明白，如果需要注释的时候，考虑的是不是应该对这个函数重构了</font></li>
</ul>
</li>
</ul>
<h4 id="三、总结"><a href="#三、总结" class="headerlink" title="三、总结"></a>三、总结</h4><p>往往一本书读完后，过些日子其实都会忘的七七八八了~更别说一一去实践了，但是我认为，读完下来你是需要得出自己的理解的，它是能高度概括为一句话的，并且在你工作中，时不时脑海中浮现出来，作为你的基准，来校正你的行为。例如本书我的收获是：<strong><font style="color:#DF2A3F;">重构是随时随地，顺手而为，使代码更容易理解，更容易修改，比来我们来时更健康！  </font></strong> 而这就是我的准则和收获！其余的更多就是围绕这个目标的实现方式，方式不是说必需每一条都掌握，当我们不知道的或者遗忘的时候，回来看就好了！但前提是我们得能发觉需要修改的时刻！</p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Wen Mo</span>
                    </p>
                
                
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2026/02/15/%E5%85%B3%E4%BA%8E%E7%BA%B9%E7%90%86%E5%8E%8B%E7%BC%A9%E5%AD%A6%E4%B9%A0/">关于纹理压缩学习</a>
            
            
            <a class="next" rel="next" href="/2025/11/23/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%8C%96/">游戏开发中的工程化</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Wen Mo | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>